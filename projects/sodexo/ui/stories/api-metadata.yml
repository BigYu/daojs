---
  definitions:
    CardType:
      type: string
      enum:
      - 员工卡
      - 访客卡
    ChargeType:
      type: string
      enum:
      - 充值
    MealName:
      type: string
      enum:
      - 早餐
      - 午餐
      - 晚餐
    BranchName:
      type: string
      enum:
      - 员工餐厅
      - 粤菜餐厅
      - 北京小院
      - 咖啡厅
      - 咖喱屋
      - 自助餐厅
      - 西餐厅
      - 意大利餐厅
    requestFilters:
      type: array
      items:
        -
          CardType:
            type: array
            items:
              $ref: "#/definitions/CardType"
          ChargeType:
            type: array
            items:
              $ref: "#/definitions/ChargeType"
          MealName:
            type: array
            items:
              $ref: "#/definitions/MealName"
          BranchName:
            type: array
            items:
              $ref: "#/definitions/BranchName"
        -
          type: string
          enum:
            - FULL
    time:
      type: string
      format: date-time
    Granularity:
      type: string
      enum:
        - Daily
        - Weekly
        - Monthly
    Metric:
      type: string
      enum:
        - Revenue
        - UserCount
        - ChargeAmount
        - DepositTotal
        - Deposit
        - ChargeCount
        - AvgChargeAmount
    requestDimensions:
      type: array
      items:
        type: string
        enum:
          - BranchName
          - MealName
          - CardType

    OrderBy:
      type: string
      enum:
        - DESC
        - ASC

  type: object
  properties:
    Predicate:
      type: object
      properties:
        request:
          type: object
          properties:
            EndTime:
              $ref: "#/definitions/time"
            Filters:
              $ref: "#/definitions/requestFilters"
            Granularity:
              $ref: "#/definitions/Granularity"
            Metrics:
              $ref: "#/definitions/Metric"
            StartTime:
              $ref: "#/definitions/time"
        response:
          type: array
          items:
            type: object
            properties:
              Dimensions:
                type: object
              Values:
                type: array
                items:
                  type: object
                  properties:
                    LowerBound:
                      type: number
                    Predict:
                      type: number
                    Timestamp:
                      $ref: "#/definitions/time"
                    UpperBound:
                      type: number
                    Value:
                      type: number
    Slice:
      type: object
      properties:
        request:
          type: object
          properties:
            Collapse:
              $ref: "#/definitions/requestDimensions"
            EndTime:
              $ref: "#/definitions/time"
            Filters:
              $ref: "#/definitions/requestFilters"
            Granularity:
              $ref: "#/definitions/Granularity"
            Metrics:
              $ref: "#/definitions/Metric"
            StartTime:
              $ref: "#/definitions/time"
        response:
          type: array
          items:
            type: object
            properties:
              Dimensions:
                type: object
              Values:
                type: array
                items:
                  type: object
                  properties:
                    __Id:
                      type: string
                    Timestamp:
                      $ref: "#/definitions/time"
                    Value:
                      type: number
    Ranker:
      type: object
      properties:
        request:
          type: object
          properties:
            Dimensions:
              $ref: "#/definitions/requestDimensions"
            EndTime:
              $ref: "#/definitions/time"
            Filters:
              $ref: "#/definitions/requestFilters"
            Metrics:
              $ref: "#/definitions/Metric"
            OrderBy:
              $ref: "#/definitions/OrderBy"
            StartTime:
              $ref: "#/definitions/time"
            ValueLimit:
              type: number
        response:
          type: array
          items:
            type: object
